<!doctype html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>RoboArm Waitroom</title>

    <!-- <link rel="stylesheet" href="styles.css"> -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style_waitroom.css') }}">
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Ubuntu&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <!-- <script src="jquery.js"></script> -->
</head>

<!-- After 5 minutes, you will be redirected to the observe page -->

<script>    
  window.setTimeout(function(){
    window.location.href = "/main";}, 300000*{{cue_number}} + 3000);
</script>


<body>

    <div class='head'>
        <div class="leftside">
        <a href="{{ url_for('observe') }}" style="text-decoration:none; color: white;"><h3>RoboArm: Waitroom</h3></a>
        </div>
        <div class="rightside">
          <a href="{{ url_for('observe') }}" class="btn">Observe</a>
          <a href="{{ url_for('logout') }}" class="btn">Log Out</a>


        </div>
    </div>

    <div class="wrapper">
        <!-- Top Container -->
        <section class="top-container">
          <header class="showcase">
            <h1>Welcome {{current_user.username}}!</h1>
            <br>
            <br>
            <br>
            <h3>Your Wait Time is:</h3>
            <h2 id="timer"> </h2>
            <h3>Your Number in Queue is:</h3>
            <h2> {{cue_number}} </h2>
          </header>
          <div class="top-box top-box-a">
            <h4>RoboArm 1</h4>
            <p class="room">Enter Room 1</p>
            <a href="{{ url_for('home') }}" class="btn">Enter</a>
          </div>
          <div class="top-box top-box-b">
            <h4>RoboArm 2</h4>
            <p class="room">Room 2 Not Connected</p>
            <a href="" class="btn_disabled" disabled>Enter</a>
          </div>
        </section>
        <div class="footer">&copy;Robot Arm Team 2020</div>
        <script src="{{ url_for('static', filename='js/jquery.js') }}"></script>

        <script> 
          window.onload = alert(localStorage.getItem("time_remaining"));
            var deadline = new Date();
            deadline.setMinutes(deadline.getMinutes() + 5 * ({{ cue_number }}));
            var x = setInterval(function() { 
            var now = new Date().getTime(); 
            var t = deadline - now; 
            var hours = Math.floor((t%(1000 * 60 * 60 * 24))/(1000 * 60 * 60));
            var minutes = (hours * 60 + Math.floor((t % (1000 * 60 * 60)) / (1000 * 60))); 
            var seconds = Math.floor(((t % (1000 * 60)) / 1000)); 
            document.getElementById("timer").innerHTML = minutes + "m " + seconds + "s "; 
              if (t < 0) { 
                  clearInterval(x); 
                  document.getElementById("timer").innerHTML = "You will be redirected shortly"; 
              } 
          }, 1000);
          </script> 


    

</body>

</html>


